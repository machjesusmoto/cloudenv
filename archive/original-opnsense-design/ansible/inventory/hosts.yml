# Ansible Inventory
# Core Infrastructure Setup
#
# Groups:
# - hypervisors: VPS host running libvirt
# - firewalls: OPNsense firewall appliance
# - proxmox: Proxmox VE virtualization platform

all:
  children:
    hypervisors:
      hosts:
        vps:
          ansible_host: "{{ vps_public_ip }}"
          ansible_port: "{{ ssh_port | default(22) }}"
          ansible_user: root
          ansible_ssh_private_key_file: "{{ ssh_private_key_path }}"

    firewalls:
      hosts:
        opnsense:
          ansible_host: "{{ opnsense_lan_ip | default('10.0.0.1') }}"
          ansible_port: 22
          ansible_user: root
          # Access via VPS host as jump host during initial setup
          ansible_ssh_common_args: '-o ProxyJump=root@{{ vps_public_ip }}'

    proxmox:
      hosts:
        pve:
          ansible_host: "{{ proxmox_ip | default('10.0.0.10') }}"
          ansible_port: 22
          ansible_user: root
          # Access via Tailscale or VPS jump host
          ansible_ssh_common_args: '-o ProxyJump=root@{{ vps_public_ip }}'

  vars:
    # Default SSH settings
    ansible_python_interpreter: /usr/bin/python3
    ansible_ssh_pipelining: true
